{
	"info": {
		"_postman_id": "choco-api-collection",
		"name": "Choco E-Commerce API",
		"description": "Complete GraphQL API collection for Chocolate E-Commerce Platform\n\nBase URL: http://164.90.215.173/graphql/\n\nCredentials:\n- Username: choco\n- Password: 311225ali",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{jwt_token}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://164.90.215.173/graphql/",
			"type": "string"
		},
		{
			"key": "jwt_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "session_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "payment_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "order_id",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "üîê Authentication",
			"item": [
				{
					"name": "Login - Get JWT Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.tokenAuth && response.data.tokenAuth.token) {",
									"        pm.collectionVariables.set('jwt_token', response.data.tokenAuth.token);",
									"        console.log('‚úÖ Token saved:', response.data.tokenAuth.token);",
									"        console.log('User:', response.data.tokenAuth.user);",
									"    } else {",
									"        console.log('‚ùå No token in response:', response);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  tokenAuth(username: \"choco\", password: \"311225ali\") {\n    token\n    payload\n    user {\n      id\n      username\n      email\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Verify Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  verifyToken(token: \"{{jwt_token}}\") {\n    payload\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Refresh Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  refreshToken(token: \"{{refresh_token}}\") {\n    token\n    payload\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "üìä Queries - Products",
			"item": [
				{
					"name": "Get All Products",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  products(limit: 10) {\n    id\n    name\n    sku\n    slug\n    description\n    isActive\n    featured\n    brand {\n      id\n      name\n      slug\n    }\n    category {\n      id\n      name\n      slug\n    }\n    prices {\n      basePrice\n      salePrice\n      priceType\n    }\n    inventory {\n      quantityInStock\n      isInStock\n      lowStockThreshold\n    }\n    images {\n      id\n      image\n      altText\n      isPrimary\n      displayOrder\n    }\n    usecaseImages {\n      id\n      image\n      displayOrder\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Get Single Product",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  product(id: 1) {\n    id\n    name\n    sku\n    slug\n    description\n    shortDescription\n    ingredients\n    allergenInfo\n    weight\n    volume\n    unitType\n    brand {\n      id\n      name\n      countryOfOrigin\n    }\n    category {\n      id\n      name\n      description\n    }\n    prices {\n      id\n      basePrice\n      salePrice\n      priceType\n      minQuantity\n      isActive\n    }\n    inventory {\n      id\n      quantityInStock\n      lowStockThreshold\n      warehouseLocation\n      isInStock\n    }\n    images {\n      id\n      image\n      altText\n      isPrimary\n      displayOrder\n    }\n    usecaseImages {\n      id\n      image\n      displayOrder\n    }\n    variants {\n      id\n      sku\n      price\n      salePrice\n      effectivePrice\n      quantityInStock\n      isInStock\n      isActive\n      isDefault\n      optionValues {\n        id\n        value\n        displayOrder\n        option {\n          id\n          name\n        }\n      }\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Search Products",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  searchProducts(query: \"chocolate\", limit: 10) {\n    id\n    name\n    sku\n    brand {\n      name\n    }\n    category {\n      name\n    }\n    prices {\n      basePrice\n      salePrice\n    }\n    inventory {\n      isInStock\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Get All Categories",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  categories {\n    id\n    name\n    slug\n    description\n    isActive\n    displayOrder\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Get Single Category",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  category(id: 1) {\n    id\n    name\n    slug\n    description\n    isActive\n    displayOrder\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Get All Brands",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  brands {\n    id\n    name\n    slug\n    description\n    countryOfOrigin\n    isActive\n    displayOrder\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Get Single Brand",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  brand(id: 1) {\n    id\n    name\n    slug\n    description\n    countryOfOrigin\n    isActive\n    displayOrder\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "üì¶ Queries - Cart & Orders",
			"item": [
				{
					"name": "Get Cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.cart && response.data.cart.sessionId) {",
									"        pm.collectionVariables.set('session_id', response.data.cart.sessionId);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Session-Id",
								"value": "{{session_id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  cart(sessionKey: \"{{session_id}}\") {\n    id\n    sessionKey\n    createdAt\n    updatedAt\n    subtotal\n    taxAmount\n    total\n    itemCount\n    items {\n      id\n      quantity\n      priceAtAddition\n      subtotal\n      productName\n      displayName\n      variantOptionsDisplay\n      variant {\n        id\n        sku\n      }\n      product {\n        id\n        name\n        sku\n        images {\n          image\n          isPrimary\n        }\n      }\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Get Order",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  order(orderNumber: \"ORD-001\") {\n    id\n    orderNumber\n    status\n    orderType\n    subtotal\n    taxAmount\n    shippingFee\n    totalAmount\n    createdAt\n    customerName\n    customerEmail\n    customerPhone\n    shippingAddress {\n      fullName\n      phone\n      streetAddress\n      city\n      emirate\n      postalCode\n      country\n    }\n    items {\n      id\n      quantity\n      unitPrice\n      subtotal\n      product {\n        id\n        name\n        sku\n      }\n    }\n    statusHistory {\n      status\n      timestamp\n      notes\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "üë§ Queries - Users",
			"item": [
				{
					"name": "Get Current User (Me)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  me {\n    id\n    username\n    email\n    firstName\n    lastName\n    isStaff\n    isActive\n    dateJoined\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Get User by ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  user(id: 1) {\n    id\n    username\n    email\n    firstName\n    lastName\n    isStaff\n    isActive\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "üõçÔ∏è Mutations - Admin - Categories",
			"item": [
				{
					"name": "Create Category",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  createCategory(input: {\n    name: \"Dark Chocolate\"\n    slug: \"dark-chocolate\"\n    description: \"Premium dark chocolate selection\"\n    isActive: true\n    displayOrder: 1\n  }) {\n    success\n    message\n    category {\n      id\n      name\n      slug\n      description\n      isActive\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Update Category",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  updateCategory(id: 1, input: {\n    name: \"Premium Dark Chocolate\"\n    description: \"Updated description\"\n    isActive: true\n  }) {\n    success\n    message\n    category {\n      id\n      name\n      description\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "üè≠ Mutations - Admin - Brands",
			"item": [
				{
					"name": "Create Brand",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  createBrand(input: {\n    name: \"Lindt\"\n    slug: \"lindt\"\n    description: \"Swiss chocolate excellence since 1845\"\n    countryOfOrigin: \"Switzerland\"\n    isActive: true\n    displayOrder: 1\n  }) {\n    success\n    message\n    brand {\n      id\n      name\n      slug\n      countryOfOrigin\n      isActive\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Update Brand",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  updateBrand(id: 1, input: {\n    name: \"Lindt Excellence\"\n    description: \"Premium Swiss chocolate\"\n    isActive: true\n  }) {\n    success\n    message\n    brand {\n      id\n      name\n      description\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "üì¶ Mutations - Admin - Products",
			"item": [
				{
					"name": "Create Product",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  createProduct(input: {\n    sku: \"CHOC-001\",\n    name: \"Dark Chocolate Bar 85%\",\n    slug: \"dark-chocolate-bar-85\",\n    brandId: 1,\n    categoryId: 1,\n    description: \"Rich dark chocolate with 85% cocoa\",\n    shortDescription: \"Premium dark chocolate\",\n    ingredients: \"Cocoa mass, cocoa butter, sugar\",\n    allergenInfo: \"May contain traces of nuts\",\n    weight: \"100.0\",\n    unitType: \"GRAM\",\n    isActive: true,\n    featured: true\n  }) {\n    success\n    message\n    product {\n      id\n      name\n      sku\n      brand {\n        name\n      }\n      category {\n        name\n      }\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Fix All Products unitType (GRAMS ‚Üí GRAM)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "JWT {{jwt_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  products(limit: 100) {\n    id\n    name\n    sku\n    unitType\n  }\n}\n\n# Then for each product with unitType=\"GRAMS\", run:\n# mutation {\n#   updateProduct(id: <ID>, input: { unitType: \"GRAM\" }) {\n#     success\n#     product { id name unitType }\n#   }\n# }"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						},
						"description": "First, query to find products with unitType='GRAMS'. Then update each one individually. For faster bulk fix, use: python manage.py fix_unit_type on the server."
					}
				},
				{
					"name": "Update Product",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  updateProduct(id: 1, input: {\n    name: \"Dark Chocolate Bar 85% - Premium\"\n    description: \"Updated description\"\n    featured: false\n    brandId: 1\n    categoryId: 1\n    unitType: \"GRAM\"\n  }) {\n    success\n    message\n    product {\n      id\n      name\n      featured\n      unitType\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						},
						"description": "Note: To fix products with unitType 'GRAMS' (plural), update them to 'GRAM' (singular). Valid unitType values: 'KG', 'GRAM', 'LITER', 'BOTTLE', 'PIECE', 'BOX', 'PACK'"
					}
				},
				{
					"name": "Delete Product (Soft Delete)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  deleteProduct(id: 1, hardDelete: false) {\n    success\n    message\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Set Product Price (Retail)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  setProductPrice(input: {\n    productId: 1\n    priceType: RETAIL\n    basePrice: \"45.00\"\n    salePrice: \"39.99\"\n    minQuantity: 1\n    isActive: true\n  }) {\n    success\n    message\n    price {\n      id\n      basePrice\n      salePrice\n      priceType\n      minQuantity\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Set Product Price (Wholesale)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  setProductPrice(input: {\n    productId: 1\n    priceType: WHOLESALE\n    basePrice: \"35.00\"\n    minQuantity: 10\n    isActive: true\n  }) {\n    success\n    message\n    price {\n      id\n      basePrice\n      priceType\n      minQuantity\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Update Inventory",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  updateInventory(input: {\n    productId: 1\n    quantityInStock: 500\n    lowStockThreshold: 50\n    warehouseLocation: \"Warehouse A - Shelf 12\"\n  }) {\n    success\n    message\n    inventory {\n      id\n      quantityInStock\n      lowStockThreshold\n      warehouseLocation\n      isInStock\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "üñºÔ∏è Mutations - Admin - Product Images",
			"item": [
				{
					"name": "Upload Product Image",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  uploadProductImage(input: {\n    productId: 1\n    image: \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=\"\n    altText: \"Dark Chocolate Bar\"\n    isPrimary: true\n    displayOrder: 1\n  }) {\n    success\n    message\n    productImage {\n      id\n      image\n      altText\n      isPrimary\n      displayOrder\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						},
						"description": "Note: Images are uploaded as base64 encoded strings. Replace the example base64 string with your actual image data in the format: data:image/jpeg;base64,<base64-string>"
					}
				},
				{
					"name": "Delete Product Image",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  deleteProductImage(imageId: 1) {\n    success\n    message\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Set Primary Image",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  setPrimaryImage(imageId: 1) {\n    success\n    message\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "üõí Mutations - Customer - Cart",
			"item": [
				{
					"name": "Add to Cart",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Session-Id",
								"value": "{{session_id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  addToCart(\n    sessionKey: \"{{session_id}}\"\n    productId: 1\n    quantity: 2\n    variantId: null\n  ) {\n    success\n    message\n    cartItem {\n      id\n      quantity\n      priceAtAddition\n      subtotal\n      productName\n      displayName\n      variantOptionsDisplay\n      product {\n        id\n        name\n      }\n      variant {\n        id\n        sku\n      }\n    }\n    cart {\n      id\n      subtotal\n      taxAmount\n      total\n      itemCount\n      sessionKey\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Update Cart Item",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Session-Id",
								"value": "{{session_id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  updateCartItem(cartItemId: 1, quantity: 5) {\n    success\n    message\n    cartItem {\n      id\n      quantity\n      priceAtAddition\n      subtotal\n      productName\n      displayName\n      product {\n        id\n        name\n      }\n    }\n    cart {\n      id\n      subtotal\n      taxAmount\n      total\n      itemCount\n      sessionKey\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Remove from Cart",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Session-Id",
								"value": "{{session_id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  removeFromCart(cartItemId: 1) {\n    success\n    message\n    cart {\n      id\n      subtotal\n      taxAmount\n      total\n      itemCount\n      sessionKey\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Clear Cart",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Session-Id",
								"value": "{{session_id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  clearCart(sessionKey: \"{{session_id}}\") {\n    success\n    message\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "üìù Mutations - Customer - Orders",
			"item": [
				{
					"name": "Create Retail Order",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-Session-Id",
								"value": "{{session_id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  createRetailOrder(\n    sessionKey: \"{{session_id}}\"\n    customerInfo: {\n      name: \"John Doe\"\n      email: \"john@example.com\"\n      phone: \"+971501234567\"\n      company: \"\"\n    }\n    shippingAddress: {\n      fullName: \"John Doe\"\n      phoneNumber: \"+971501234567\"\n      email: \"john@example.com\"\n      addressLine1: \"123 Main Street\"\n      addressLine2: \"Apartment 4B\"\n      city: \"Dubai\"\n      emirate: \"DUBAI\"\n      area: \"Downtown\"\n      postalCode: \"12345\"\n      deliveryInstructions: \"Please handle with care\"\n    }\n  ) {\n    success\n    message\n    order {\n      id\n      orderNumber\n      status\n      orderType\n      subtotal\n      taxAmount\n      deliveryFee\n      totalAmount\n      customerName\n      customerEmail\n      customerPhone\n      shippingAddress {\n        fullName\n        phoneNumber\n        city\n        emirate\n        addressLine1\n      }\n      items {\n        id\n        productName\n        productSku\n        quantity\n        unitPrice\n        totalPrice\n      }\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "‚öôÔ∏è Mutations - Admin - Order Management",
			"item": [
				{
					"name": "Update Order Status",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  updateOrderStatus(orderId: 1, input: {\n    status: CONFIRMED\n    notes: \"Order confirmed and processing\"\n  }) {\n    success\n    message\n    order {\n      id\n      orderNumber\n      status\n      statusHistory {\n        status\n        timestamp\n        notes\n      }\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Cancel Order",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  cancelOrder(orderId: 1, reason: \"Customer request\") {\n    success\n    message\n    order {\n      id\n      orderNumber\n      status\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Update Shipping Address",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation {\n  updateShippingAddress(orderId: 1, input: {\n    fullName: \"Jane Doe\"\n    phone: \"+971509876543\"\n    streetAddress: \"456 New Street\"\n    city: \"Abu Dhabi\"\n    emirate: \"Abu Dhabi\"\n    postalCode: \"67890\"\n    country: \"UAE\"\n  }) {\n    success\n    message\n    order {\n      id\n      orderNumber\n      shippingAddress {\n        fullName\n        city\n        emirate\n      }\n    }\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		},
		{
			"name": "üí≥ Payments - Ziina",
			"item": [
				{
					"name": "STEP 1: Create Payment Session (Ziina)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.createPaymentSession && response.data.createPaymentSession.success) {",
									"        const paymentId = response.data.createPaymentSession.paymentId;",
									"        const paymentUrl = response.data.createPaymentSession.paymentUrl;",
									"        if (paymentId) {",
									"            pm.collectionVariables.set('payment_id', paymentId);",
									"            console.log('‚úÖ Payment ID saved:', paymentId);",
									"        }",
									"        if (paymentUrl) {",
									"            console.log('üîó Payment URL:', paymentUrl);",
									"            console.log('üëâ Copy this URL and open in browser to complete payment');",
									"        }",
									"    } else {",
									"        console.log('‚ùå Payment creation failed:', response);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation CreateZiinaPayment($input: PaymentSessionInput!, $gatewayName: String!) {\n  createPaymentSession(input: $input, gatewayName: $gatewayName) {\n    success\n    message\n    paymentUrl\n    paymentId\n    expiresAt\n    gatewayResponse\n  }\n}",
								"variables": "{\n  \"input\": {\n    \"order_id\": \"{{order_id}}\",\n    \"amount\": \"105.00\",\n    \"currency\": \"AED\",\n    \"customer_email\": \"test@example.com\",\n    \"customer_phone\": \"+971501234567\",\n    \"customer_name\": \"Test Customer\",\n    \"tax_amount\": \"5.00\",\n    \"shipping_amount\": \"0.00\",\n    \"discount_amount\": \"0.00\",\n    \"items\": [\n      {\n        \"name\": \"Premium Chocolate Box\",\n        \"price\": \"100.00\",\n        \"quantity\": 1,\n        \"sku\": \"CHOC-001\"\n      }\n    ],\n    \"shipping_address\": {\n      \"full_name\": \"Test Customer\",\n      \"phone_number\": \"+971501234567\",\n      \"email\": \"test@example.com\",\n      \"address_line1\": \"123 Test Street\",\n      \"city\": \"Dubai\",\n      \"emirate\": \"DUBAI\",\n      \"postal_code\": \"12345\"\n    }\n  },\n  \"gatewayName\": \"ZIINA\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "STEP 2: Verify Payment Status",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation VerifyZiinaPayment($input: PaymentVerificationInput!) {\n  verifyPayment(input: $input) {\n    success\n    message\n    status\n    amount\n    transactionId\n    gatewayResponse\n  }\n}",
								"variables": "{\n  \"input\": {\n    \"paymentId\": \"{{payment_id}}\",\n    \"gatewayName\": \"ZIINA\"\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Get Payment by ID",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetPayment($paymentId: String!) {\n  payment(paymentId: $paymentId) {\n    id\n    paymentId\n    orderId\n    gateway\n    status\n    amount\n    currency\n    paymentUrl\n    transactionId\n    createdAt\n    verifiedAt\n    gatewayResponse\n  }\n}",
								"variables": "{\n  \"paymentId\": \"{{payment_id}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Get Available Payment Gateways",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetPaymentGateways($amount: Decimal) {\n  availableGateways(amount: $amount) {\n    suitableGateways\n    allGateways\n  }\n  paymentGateways(isActive: true) {\n    id\n    name\n    displayName\n    isActive\n    config\n  }\n}",
								"variables": "{\n  \"amount\": \"105.00\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				},
				{
					"name": "Get All Payments",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetPayments($gateway: String, $status: String) {\n  payments(gateway: $gateway, status: $status) {\n    id\n    paymentId\n    orderId\n    gateway\n    status\n    amount\n    currency\n    createdAt\n    verifiedAt\n  }\n}",
								"variables": "{\n  \"gateway\": \"ZIINA\",\n  \"status\": null\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}",
							"host": ["{{base_url}}"]
						}
					}
				}
			]
		}
	]
}
